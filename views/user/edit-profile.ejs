<%-include('../user/layout/user-header-layout')-%>
<div class="container-xl px-4" style="margin-top: 90px;">
    <!-- Account page navigation-->
    
    <div class="row">
        
        <div class="col-xl-8 mx-auto">
            <!-- Account details card-->
            <div class="card mb-4">
                <div class="card-header">Account Details</div>
                <div class="card-body">
                    <form action="/editProfile" method="post">
                        <!-- Form Group (username)-->
                        <div class="col-md-6">
                            <label class="small mb-1" for="inputUsername">Username (how your name will appear to other users on the site)</label>
                            <input class="form-control" id="inputUsername" type="text" placeholder="Enter your username" value="<%=userDetails.name%>" name="name">
                        </div>
                        
                        <!-- <div class="mb-3">
                            <label class="small mb-1" for="inputEmailAddress">Email address</label>
                            <input class="form-control" id="inputEmailAddress" type="email" placeholder="Enter your email address" value="<%=userDetails.email%>" name="email">
                        </div> -->
                        <!-- Form Row-->
                        <div class="row gx-3 mb-3 ">
                            <!-- Form Group (phone number)-->
                            <div class="col-md-6 ml-3">
                                <label class="small mb-1" for="inputPhone">Phone number</label>
                                <input class="form-control" id="inputPhone" type="tel" placeholder="Enter your phone number" value="<%=userDetails.phone%>" name="phone">
                            </div>
                        </div>
                        <!-- Save changes button-->
                        <button class="btn btn-primary ml-3" type="submit">Save changes</button>
                    </form>
                    <button class="btn btn-info ml-3 mt-3" type="button" onclick="viewForm()" id="resetButton">Reset Password</button>
                    <%if(err){%>
                        <p class="text-danger">Incorrect Password</p>
                    <%}else if(success){%>
                        <p class="text-success">Password Changed Successfully</p>
                    <%}%>
                    <div style="display: none;" id="formDiv" class="mt-3 ml-3">
                        <form action="/editUserPass" method="post">
                            <div class="row gx-3 mb-3">
                                <div class="col-md-6">
                                    <label class="small mb-1" for="inputPhone">Current Password</label>
                                    <input class="form-control" id="inputPhone" type="password" name="oldPass">
                                </div>
                                <div class="col-md-6">
                                    <label class="small mb-1" for="NewPass">New Password</label>
                                    <input class="form-control" id="NewPass" type="password" name="newPass">
                                </div>
                                <div class="col-md-6">
                                    <label class="small mb-1" for="ConfirmPass">Confirm New Password</label>
                                    <input class="form-control" id="ConfirmPass" type="password" name="newPassConfirm" onkeyup="checkPass()">
                                    <p class="text-danger" id="errMsg" style="display: none;">Incorrect password</p>
                                </div>
                            </div>
                            <button class="btn btn-primary" type="submit" id="resetButton1" style="display: none;">Reset</button>
                            <!-- <button class="btn btn-primary" type="submit" id="resetButtonDis" disabled style="display: none;">Reset</button> -->
                        </form>
                            <button type="button" class="btn btn-danger mt-3" onclick="cancelForm()" id="cancelButton" style="display: none;">cancel</button>
                    </div>       
                        
                      
                        

                </div>
            </div>
        </div>
    </div>
</div>
<script>
   function checkPass(){
    let password=document.getElementById('NewPass').value
    let passConfirm=document.getElementById('ConfirmPass').value
    let button=document.getElementById('resetButton1')
    let err=document.getElementById('errMsg')
    // let disButton=document.getElementById('resetButtonDIs')
    if(passConfirm==password){
        button.style.display='block'
        // disButton.style.display='none'
        err.style.display='none'
    }else{
        button.style.display='none'
        // disButton.style.display='block'
        err.style.display='block'
    }
   }
   function viewForm(){
    let mainDiv=document.getElementById('formDiv')
    mainDiv.style.display='block'
    let button=document.getElementById('resetButton')
    button.style.display='none'
    let cancelButton=document.getElementById('cancelButton')
    cancelButton.style.display='block'

 }
 function cancelForm(){
    let mainDiv=document.getElementById('formDiv')
    mainDiv.style.display='none'
    let button=document.getElementById('resetButton')
    button.style.display='block'
    let cancelButton=document.getElementById('cancelButton')
    cancelButton.style.display='none'
 }
function changeProfile(){
    let button=document.getElementById('changeButton')
    let form=document.getElementById('picForm')
    button.style.display='none'
    form.style.display='block'
}
</script>
<%-include('../user/layout/user-footer-layout')-%>